# AUTH

Авторизация – это предоставление лицу прав на какие-то действия в
системе.

Аутентификация — это процедура проверки подлинности заявленного
пользователя, процесса или устройства. Данная процедура позволяет
достоверно убедиться, что пользователь (процесс или устройство) является
именно тем, кем себя объявляет.


К нам пришел запрос если не требует ничего то респонс сразу приходит без каких либо проверок 

Аутентификация -> Авторизация

Нужно делигировать на отдельный сервис, чтоб повысить безопасность
(kclock)

пользователь пытается достучаться к защищенному ресурсу -> прилетакет 403 отказ по провам и тогда он захочет ее пройти (аутф)

обращается по какомоту пути /api/auth 


и у него его еесть аккаунт в ресурсах (лог и пароль)

мы кидаем запрос на сервер ресурсов если нам говорят ок 


то сервис с ресурсами возвращает нам jwt (json web token) 

мы этот токен отдаем пользователю 

и то время пока он будет жив (токен ) добавляя его в  запросы может обращатся к ресам на которые он может основываясь на роль тип

![auth.png](img%2Fauth.png)



Теория OAuth 2.0 и Keycloak с использованием Spring Boot 3
Аутентификация и Авторизация
Аутентификация: Процесс проверки подлинности пользователя, устройства или процесса. Аутентификация подтверждает, что пользователь является тем, за кого себя выдает, с помощью проверки учетных данных (логин и пароль).
Авторизация: Процесс предоставления пользователю прав на выполнение определенных действий в системе. Авторизация происходит после аутентификации и определяет, к каким ресурсам и операциям пользователь имеет доступ.
Общий процесс
Аутентификация -> Авторизация:

Пользователь отправляет запрос к защищенному ресурсу.
Если запрос требует аутентификации и авторизации, но не содержит валидного токена, система возвращает HTTP 403 (Forbidden).
Пользователь переходит к процессу аутентификации, предоставляя свои учетные данные.
Использование отдельного сервиса для безопасности (Keycloak):

Делегирование задач аутентификации и авторизации внешнему сервису (Keycloak) повышает безопасность и упрощает управление пользователями и ролями.
Процесс OAuth 2.0 с использованием Keycloak
Пользователь запрашивает защищенный ресурс:

Пользователь отправляет запрос к защищенному ресурсу в вашем Spring Boot приложении.
Если токен отсутствует или недействителен, сервер возвращает HTTP 403 (Forbidden).
Аутентификация через /api/auth:

Пользователь обращается к эндпоинту /api/auth с учетными данными (логин и пароль).
Запрос к серверу ресурсов (Keycloak):

Приложение отправляет запрос к серверу Keycloak с учетными данными пользователя.
Keycloak проверяет учетные данные и, если они корректны, возвращает JWT (JSON Web Token).
Передача JWT пользователю:

Приложение передает JWT пользователю.
Пользователь использует JWT для доступа к защищенным ресурсам.
Доступ к защищенным ресурсам с использованием JWT:

Пока JWT действителен, пользователь включает его в запросы к защищенным ресурсам.
Сервер проверяет JWT и предоставляет доступ к ресурсам на основе ролей и разрешений, указанных в токене.