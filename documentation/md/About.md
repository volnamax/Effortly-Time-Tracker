
# Проект: Effortly-Time-Tracker с Nginx и Pandoc

## Описание
Данный проект включает в себя:
1. **Effortly-Time-Tracker** — Java-приложение, развернутое через Spring Boot.
2. **Nginx** — используется для маршрутизации, проксирования, отображения статики (SPA-приложения) и конвертации Markdown файлов в HTML с помощью `pandoc`.

## Используемые технологии
- **Java 17** для разработки приложения.
- **Spring Boot** для создания REST API.
- **PostgreSQL** как база данных.
- **PgAdmin4** для управления базой данных.
- **Nginx** для проксирования, обработки статики и отображения Swagger UI.
- **Pandoc** для преобразования `README.md` в HTML.

## Предварительные требования
- Установленный Docker и Docker Compose.

## Как запустить проект

### 1. Клонирование репозитория
Склонируйте репозиторий на свой компьютер:

```bash
git clone <ссылка-на-репозиторий>
cd <название-папки>
```

### 2. Запуск через Docker Compose
Выполните команду для запуска всех сервисов:

```bash
docker-compose up --build
```
перезапуск только nginx 
```bash
docker-compose up -d nginx --force-recreate
```

### 3. Доступные порты
После запуска проект будет доступен на следующих портах:
- **Java-приложение (Effortly-Time-Tracker):** `http://localhost:8080`
- **Swagger UI:** `http://localhost:8081/api/v2/`
- **Документация (README):** `http://localhost:8081/documentation`
- **SPA-приложение:** `http://localhost:8081/`
- **Тестовая страница SPA:** `http://localhost:8081/test`
- **PgAdmin4:** `http://localhost:5050`
- **Статус сервера Nginx:** `http://localhost:8081/status`

## Описание сервисов

### 1. **Java-приложение**
- Приложение Effortly-Time-Tracker написано на Java 17 и запускается на порту `8080`.
- Swagger UI доступен через проксирование на Nginx (`/api/v2/`).

### 2. **Nginx**
- Главная страница SPA отображается по пути `/` (папка `/my-spa`).
- Маршруты для изображений корректно настроены для SPA (`/img/`) и документации (`/documentation/img/`).
- Для документации `README.md` используется `pandoc`, чтобы сгенерировать HTML-страницу.
- Страница статуса Nginx доступна на `/status`.

### 3. **PgAdmin4**
- Веб-интерфейс для управления базой данных PostgreSQL.
- Авторизация через `admin@admin.com` и пароль `1564`.

### 4. **PostgreSQL**
- Хранит данные для приложения.
- Инициализируется SQL-скриптом (`CreateTables.sql`).

## Полезные команды

### Остановка всех сервисов
```bash
docker-compose down
```

### Пересборка проекта
```bash
docker-compose up --build
```

### Проверка логов
```bash
docker-compose logs -f
```

## Структура проекта
- **Dockerfile** — файлы для сборки контейнеров (Java-приложение и Nginx с Pandoc).
- **docker-compose.yml** — конфигурация всех сервисов.
- **README.md** — этот файл с инструкциями.

## Возможные ошибки и решения
1. **Ошибка подключения к PgAdmin:** Убедитесь, что база данных PostgreSQL запущена, и проверьте `depends_on` в `docker-compose.yml`.
2. **Nginx не отображает SPA:** Проверьте, чтобы файлы SPA находились в папке `/my-spa`.
3. **Документация не генерируется:** Убедитесь, что Pandoc установлен, и `README.md` корректно скопирован.


